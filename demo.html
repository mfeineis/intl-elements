<!DOCTYPE>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>IntlElements Demo Page</title>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/2.0.2/webcomponents-bundle.js"></script>
    <script type="application/json" data-intl-locale="es-ES">
        {
            "some.otherKey": "Que rico!"
        }
    </script>
    <script src="./dist/intl-elements.js"></script>
    <script>

     // FIXME: Change <html lang> on language change

     IntlElements({
         defaultLocale: "en-US",
         defaultMessages: {
             "some.otherKey": "Great!",
         },
         requestTranslation: locale => Promise.resolve(
             JSON.parse(
                 document.querySelector(`[data-intl-locale="${locale}"]`).innerText
             )
         ),
         supportedLocales: {
             "en": "en-US",
             "en-US": "en-US",
             "es": "es-ES",
             "es-ES": "es-ES",
         },
         //locale: "es-ES",
         provide: {
             //Intl: () => Promise.resolve(window.Intl),
             //requestTranslation: locale => Promise.resolve(
             //    JSON.parse(
             //        document.querySelector(`[data-intl-locale]=${locale}`).innerText
             //    )
             //),
             //formatDate: date => date.toISOString(),
             //formatNumber: number => String(number),
         },
     });
     IntlElements.ready(api => console.log("> IntlElements.ready"));

    </script>

    <intl-span intl='{ "key": "some.otherKey" }'></intl-span>

    <script>

     setTimeout(() => {
        console.log("Changing locale to 'es-AR'...");
         IntlElements.changeLocale("es-AR").then(actualLocale => {
             console.info(`> Locale changed to ${actualLocale}`);
         }).catch(error => {
             console.error("> Changing locale failed.", error);
         });
     }, 1000);

    </script>
</body>
</html>
